!function(a){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=a();else if("function"==typeof define&&define.amd)define([],a);else{var b;"undefined"!=typeof window?b=window:"undefined"!=typeof global?b=global:"undefined"!=typeof self&&(b=self),b.Liwi=a()}}(function(){return function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b){"use strict";var c=a("./object"),d=a("./fields"),e=a("./messages"),f=function(a){switch(a.type){case"text":return React.createElement(d.TextBox,a);case"password":return React.createElement(d.TextBox,a);case"int":return React.createElement(d.IntegerBox,a);case"submit":return React.createElement(d.Submit,a);default:throw new Error("Have no idea what kind of field you want rendered")}},g=function(a){var b=Object.keys(a),d=[],e=1;for(b.reverse();b.length>0;){var g=b.pop(),h=c.extend({},a[g]);if(h.name=g.toString(),h.ref=g.toString(),h.key=e++,-1===Object.keys(h).indexOf("type"))throw new Error("Can't determine the type of "+g+" field");d.push(f(h))}return d},h=React.createClass({displayName:"BaseForm",getInitialState:function(){return{fields:this.props.fields,data:{},errors:[]}},componentDidMount:function(){},extractFieldsValue:function(){for(var a in this.state.fields)this.refs[a].state.isRequired?""===this.refs[a].state.value?(this.refs[a].state.errorSpan=e.isRequired,this.state.errors.push(a.toString()+" "+e.isRequired)):this.refs[a].state.isValid===!1?(this.refs[a].state.errorSpan=e.wrongFormat,this.state.errors.push(a.toString()+" "+e.wrongFormat)):this.state.data[a]=this.refs[a].state.value:this.refs[a].state.isRequired===!1&&this.refs[a].state.isValid===!1?(this.refs[a].state.errorSpan=e.wrongFormat,this.state.errors.push(a.toString()+" "+e.wrongFormat)):this.state.data[a]=this.refs[a].state.value},onSubmit:function(a){this.props.cancel&&a.preventDefault(),this.extractFieldsValue();var b={errors:this.state.errors,data:this.state.data};this.props.onSubmit&&this.props.onSubmit(b),this.setState({errors:[]})},render:function(){var a=g(this.state.fields).map(function(a){return a});return a.push(React.createElement(d.Submit,{value:this.props.value,key:0})),React.DOM.form({className:"liwi-baseform",onSubmit:this.onSubmit},a)}});b.exports={BaseForm:h}},{"./fields":2,"./messages":4,"./object":6}],2:[function(a,b){"use strict";var c=a("./mixins"),d=React.createClass({displayName:"ErrorSpan",render:function(){var a=this.props.errorSpan.length,b={color:a>0?"#f00":"#000",fontWeight:a>0?"bold":"normale"};return React.DOM.span({className:"liwi-errorspan",style:b},this.props.errorSpan)}}),e=React.createClass({displayName:"Label",render:function(){return React.DOM.label({className:"liwi-label",htmlFor:this.props.htmlFor},this.props.label)}}),f=React.createClass({displayName:"TextBox",mixins:[c.TextBoxMixin],componentDidMount:function(){},render:function(){return React.DOM.dl(null,React.DOM.dt(null,React.createElement(e,{label:this.props.label,htmlFor:this.props.name})),React.DOM.dd(null,React.DOM.input({className:"liwi-input",type:this.props.type,name:this.props.name,id:this.props.name,ref:this.props.ref,onChange:this.onChange,onBlur:this.onChange}),React.createElement(d,{errorSpan:this.state.errorSpan})))}}),g=React.createClass({displayName:"IntegerBox",mixins:[c.IntegerBoxMixin],render:function(){return React.DOM.dl(null,React.DOM.dt(null,React.createElement(e,{label:this.props.label,htmlFor:this.props.name})),React.DOM.dd(null,React.DOM.input({className:"liwi-input",type:"text",name:this.props.name,id:this.props.name,ref:this.props.ref,onChange:this.onChange,onBlur:this.onBlur}),React.createElement(d,{errorSpan:this.state.errorSpan})))}}),h=React.createClass({displayName:"Submit",render:function(){return React.DOM.input({className:"liwi-submit",type:"submit",value:this.props.value})}});b.exports={TextBox:f,IntegerBox:g,Submit:h}},{"./mixins":5}],3:[function(a,b){"use strict";var c=a("./base"),d=a("./object");b.exports={BaseForm:c.BaseForm,Type:d.type}},{"./base":1,"./object":6}],4:[function(a,b){"use strict";b.exports={isRequired:"field is required",wrongFormat:"field is in the wrong format"}},{}],5:[function(a,b){"use strict";var c=a("./messages"),d={getInitialState:function(){return{value:"",isRequired:this.props.required,isValid:!0,errorSpan:""}},validate:function(a){this.setState(this.state.isRequired&&""===a?{errorSpan:c.isRequired}:{value:a,errorSpan:""})},onChange:function(a){this.validate(a.target.value)},onBlur:function(a){this.validate(a.target.value)}},e={getInitialState:function(){return{value:"",isRequired:this.props.required,isValid:!1,errorSpan:""}},validate:function(a){this.setState(/^([0-9])+$/.test(a)?{value:a,isValid:!0,errorSpan:""}:{value:a,isValid:!1,errorSpan:c.wrongFormat})},onChange:function(a){this.validate(a.target.value)},onBlur:function(a){this.validate(a.target.value)}};b.exports={TextBoxMixin:d,IntegerBoxMixin:e}},{"./messages":4}],6:[function(a,b){"use strict";function c(a){return e.call(a).slice(8,-1).toLowerCase()}function d(a,b){for(var c in b)a[c]=b[c];return a}var e=Object.prototype.toString;b.exports={type:c,extend:d}},{}]},{},[3])(3)});
//# sourceMappingURL=liwi.min.js.map